<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/common :: head">

</head>
<body>
<header th:replace="fragments/common :: header"></header>
<div class="bg-blur">
    <div class="d-flex justify-content-center">
        <div class="bg-green-linear mt-4 py-2 d-flex align-items-center justify-content-center rounded">
            <form th:object="${userChangeRoleBindingModel}" th:action="@{/users/change-role}" th:method="PUT">
                <h3 class="text-center">Change user Role</h3>
                <div>
                    <div class="col-auto mx-2">
                        <label for="selectUsername" class="col-form-label"><strong>User names</strong></label>
                    </div>
                    <div class="col-auto mx-2">
                        <select class="form-control" th:field="*{username}"  id="selectUsername">
                            <option value="" disabled selected>Select username</option>
                            <option th:each="user : ${allUsers}"
                                    th:value="${user.username}"
                                    th:text="${user.username}"></option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <small th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="text-light form-text bg-danger rounded mx-2"></small>
                    </div>
                </div>
                <div>
                    <div class="col-auto mx-2">
                        <label for="selectRole" class="col-form-label"><strong>User Roles</strong></label>
                    </div>
                    <div class="col-auto mx-2">
                        <select class="form-control" th:field="*{userRole}"  id="selectRole">
                            <option value="" disabled selected>Select role</option>
                            <option th:each="role : ${userRoles}"
                                    th:value="${role.role.name}"
                                    th:text="${#strings.substring(role.role.name, 5).concat(': ').concat(role.description)}"></option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <small th:if="${#fields.hasErrors('userRole')}" th:errors="*{userRole}" class="text-light form-text bg-danger rounded mx-2"></small>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-2">
                    <button class="btn btn-warning btn-block w-50" type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>